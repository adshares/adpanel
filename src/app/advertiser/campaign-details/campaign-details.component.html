<section class="dashboard-view">
  <div class="container">
    <div
      class="
        row
        align-center
        breadcrumbs"
    >
      <a
        routerLink="/advertiser/dashboard"
        data-test="advertiser-navigate-to-dashboard"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small"
        >
          My Campaigns
        </p>
      </a>
      <div
        class="
          adsh-circle
          adsh-circle--x-small
          adsh-circle--navy
          breadcrumbs-divider"
      >
      </div>
      <p
        class="
          adsh-copy
          adsh-copy--small
          adsh-copy--x-dark
          adsh-copy--semi"
      >
        {{ campaign.basicInformation.name }}
      </p>
    </div>
    <div
      class="
        row
        no-gutters
        justify-between
        align-center"
    >
      <div
        class="
          col-xs-5
          col-md-4"
      >
        <h1
          class="
            adsh-heading
            adsh-heading--primary"
        >
          {{ campaign.basicInformation.name }}
        </h1>
      </div>

      <div
        class="
          col-xs-7
          col-md-8
          row
          justify-end
          align-center"
      >

        <div class="row status-toggle-wrapper">
          <p>
            <span class="adsh-copy">Classification: </span>
            <span class="adsh-copy adsh-copy--x-dark lowercase-to-capitalize" data-test="advertiser-campaign-classification">
              {{ classificationLabel() }}
            </span>
          </p>
          <mat-slide-toggle
                  color="primary"
                  [checked]="isClassificationChecked(campaign.classificationStatus)"
                  [disabled]="isClassificationChecked(campaign.classificationStatus)"
                  ([ngModel])="campaign.classificationStatus"
                  (change)="onCampaignClassificationStatusChange(campaign.classificationStatus)"
                  data-test="advertiser-campaign-classification-status-toggle"
          ></mat-slide-toggle>
        </div>


        <div
          class="
            row
            status-toggle-wrapper"
        >
          <p>
            <span class="adsh-copy">Status: </span>
            <span
              class="
                adsh-copy
                adsh-copy--x-dark
                lowercase-to-capitalize"
              data-test="advertiser-campaign-status"
            >
              {{ campaignStatusesEnum[campaign.basicInformation.status] }}
            </span>
          </p>
          <mat-slide-toggle
            color="primary"
            [checked]="campaign.basicInformation.status === campaignStatusesEnum.ACTIVE"
            ([ngModel])="campaign.basicInformation.status"
            (change)="onCampaignStatusChange(campaign.basicInformation.status)"
            data-test="advertiser-campaign-status-toggle"
          ></mat-slide-toggle>
        </div>
        <button
          class="
            adsh-btn
            adsh-btn--white
            adsh-btn--no-border
            hidden-md"
          (click)="navigateToEditCampaign()"
        >
          <img
            class="
              adsh-icon
              adsh-icon--prepend"
            src="/assets/images/edit.svg"
            alt="Edit icon"
          >
          <span
            class="
              adsh-copy
              adsh-copy--dark"
          >
            Edit Campaign
          </span>
        </button>
        <button
          class="
            adsh-btn
            adsh-btn--white
            adsh-btn--no-border
            btn-delete"
          (click)="deleteCampaign()"
        >
          <img
            class="
              adsh-icon
              adsh-icon--prepend"
            src="/assets/images/x-circle--gray.svg"
            alt="Delete icon"
          >
          <span
            class="
              adsh-copy
              adsh-copy--dark"
          >
            Delete Campaign
          </span>
        </button>
      </div>
    </div>

    <div
      class="
        adsh-box
        adsh-box--large"
    >
      <div
        class="
          row
          align-center
          adsh-copy
          campaign-basic-information"
      >
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Target URL:
          </p>
          <p
            class="
              adsh-copy--dark
              adsh-copy--semi"
            data-test="advertiser-campaign-target-url"
          >
            {{ campaign.basicInformation.targetUrl }}
          </p>
        </div>
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Max Cpc
          </p>
          <p
            class="
              adsh-copy--dark
              adsh-copy--semi"
            data-test="advertiser-campaign-max-cpc"
          >
            {{ campaign.basicInformation.maxCpc | number:'1.0-11' }}
          </p>
        </div>
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Max Cpm
          </p>
          <p
            class="
              adsh-copy--dark
              adsh-copy--semi"
            data-test="advertiser-campaign-max-cpm"
          >
            {{ campaign.basicInformation.maxCpm | number:'1.0-11' }}
          </p>
        </div>
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Budget
          </p>
          <p
            class="
              adsh-copy--dark
              adsh-copy--semi"
            data-test="advertiser-campaign-budget"
          >
            {{ campaign.basicInformation.budget | campaignBudgetPerDay | number:'1.0-11' }}
          </p>
        </div>
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Date of Start
          </p>
          <div
            class="
              row
              align-center"
          >
            <img
              class="
                adsh-icon
                adsh-icon--prepend"
              src="/assets/images/calendar.svg"
              alt="Calendar Icon"
            >
            <p
              class="
                adsh-copy--dark
                adsh-copy--semi"
              data-test="advertiser-campaign-start-date"
            >
              {{ campaign.basicInformation.dateStart | date:'dd MMM yyyy' }}
            </p>
          </div>

        </div>
        <div>
          <p
            class="
              adsh-copy--small
              label"
          >
            Date of End
          </p>
          <div
            class="
              row
              align-center"
          >
            <img
              class="
                adsh-icon
                adsh-icon--prepend"
              src="/assets/images/calendar.svg"
              alt="Calendar Icon"
            >
            <p
              *ngIf="campaign.basicInformation.dateEnd; else dateEndEmpty"
              class="
                adsh-copy--dark
                adsh-copy--semi"
              data-test="advertiser-campaign-end-date"
            >
              {{ campaign.basicInformation.dateEnd | date:'dd MMM yyyy'}}
            </p>
            <ng-template #dateEndEmpty>
              -
            </ng-template>
          </div>
        </div>
      </div>
    </div>

    <!--mock chart-->
    <div
      class="
        adsh-box
        adsh-box--large
        hidden-md"
    >
      <app-chart-filter-by-type
        (updateId)="appChartRef.updateChartDataSeries($event)"
        (updateSeries)="appChartRef.updateChartDataAssetId($event)"
      ></app-chart-filter-by-type>
      <div
        class="
          row
          align-center
          justify-center
          chart-wrapper"
      >
        <app-chart
          class="
            chart
            row
            align-center
            justify-center"
          (update)="getChartData($event)"
          [barChartData]="barChartData"
          [barChartLabels]="barChartLabels"
        ></app-chart>
      </div>
    </div>

    <div
      class="
        row
        campaign-details-statistics"
    >
      <div
        class="
          adsh-box
          adsh-box--large"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small"
        >
          Budget
        </p>
        <p
          class="
            adsh-heading
            adsh-heading--primary"
          data-test="advertiser-campaign-budget"
        >
          {{ campaign.basicInformation.budget | campaignBudgetPerDay | number:'1.2-2' }}/day
        </p>
        <p
          class="
            adsh-copy
            adsh-copy--x-small
            adsh-blue"
        >
          - (-%)
        </p>
      </div>
      <div
        class="
          adsh-box
          adsh-box--large"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small"
        >
          Clicks
        </p>
        <p
          class="
            adsh-heading
            adsh-heading--primary"
          data-test="advertiser-campaign-clicks"
        >
          {{ campaign.clicks }}
        </p>
        <p
          class="
            adsh-copy
            adsh-copy--x-small
            adsh-blue"
        >
          - (-%)
        </p>
      </div>
      <div
        class="
          adsh-box
          adsh-box--large"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small"
        >
          Cost
        </p>
        <p
          class="
            adsh-heading
            adsh-heading--primary"
          data-test="advertiser-campaign-cost"
        >
          {{ campaign.cost | number:'1.2-2' }}
        </p>
        <p
          class="
            adsh-copy
            adsh-copy--x-small
            adsh-blue"
        >
          - (-%)
        </p>
      </div>
      <div
        class="
          adsh-box
          adsh-box--large"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small">Conversions</p>
        <p
          class="
            adsh-heading
            adsh-heading--primary"
          data-test="advertiser-campaign-conversions"
        >
          {{ campaign.conversions }}
        </p>
        <p
          class="
            adsh-copy
            adsh-copy--x-small
            adsh-blue"
        >
          - (-%)
        </p>
      </div>
      <div
        class="
          adsh-box
          adsh-box--large"
      >
        <p
          class="
            adsh-copy
            adsh-copy--small"
        >
          Cost/Conv
        </p>
        <p
          class="
            adsh-heading
            adsh-heading--primary"
          data-test="advertiser-campaign-cost-converions-ratio"
        >
          {{ campaign.cost / campaign.conversions | number:'1.2-2'  }}
        </p>
        <p
          class="
            adsh-copy
            adsh-copy--x-small
            adsh-blue"
        >
          - (-%)
        </p>
      </div>
    </div>

    <app-ad-list [adList]="campaign.ads"></app-ad-list>

    <div
      class="
        adsh-box
        hidden-md"
    >
      <div
        class="
          row
          justify-center"
      >
        <button
          class="
            row
            align-center
            adsh-btn
            adsh-btn--large
            adsh-btn--white
            adsh-btn--no-border"
          (click)="navigateToCreateAd()"
        >
          <img
            src="/assets/images/plus-circle--blue.svg"
            alt="Add new icon"
            class="
              adsh-icon
              adsh-icon--prepend"
          >
          <span
            class="
              adsh-heading
              adsh-heading--secondary"
          >
            Create new Ad
          </span>
        </button>
      </div>
    </div>
  </div>
</section>
