<div
  class="
    col
    dwmth-login-wrapper"
>
  <div *ngIf="loginForm">
    <ng-template #loading>
      <mat-spinner [diameter]="16" [strokeWidth]="2"></mat-spinner>
    </ng-template>
    <h2
      class="
          dwmth-heading
          dwmth-heading--primary"
    >
      Hello!
    </h2>
    <p
      class="
          dwmth-copy
          dwmth-copy--large"
    >
      Please log in to your account.
    </p>

    <div class="login-buttons">
      <button
        *ngIf="adsWalletAvailable"
        class="dwmth-btn dwmth-btn--bordered-light"
        (click)="initWalletLogin('ADS')"
        [disabled]="isAdsLoggingIn"
      >
        <img src="/assets/images/ads.svg" alt="ADS">
        <ng-container *ngIf="!isAdsLoggingIn; else loading">
          Log in with ADS Wallet
        </ng-container>
      </button>
      <button
        *ngIf="ethereumAvailable"
        class="dwmth-btn dwmth-btn--bordered-light"
        (click)="initWalletLogin('BSC')"
        [disabled]="isBscLoggingIn"
      >
        <img src="/assets/images/metamask.svg" alt="MetaMask">
        <ng-container *ngIf="!isBscLoggingIn; else loading">
          Log in with MetaMask</ng-container>
      </button>
      <br />
      <div class="error-msg" *ngIf="walletLoginError">{{walletLoginError}}</div>
    </div>

    <form
      (ngSubmit)="login()"
      [formGroup]="loginForm"
      class="dwmth-form"
      data-test="auth-login-form"
    >
      <div
        *ngIf="criteriaError && loginFormSubmitted"
        class="error-msg"
      >
        Password or email is invalid.
      </div>
      <div class="dwmth-form-input__box">
        <label
          class="dwmth-form-label"
          for="email"
        >
          Email address
        </label>
        <input
          class="dwmth-form-input"
          data-test="auth-login-form-email"
          formControlName="email"
          id="email"
          name="email"
          type="email"
        >
        <span
          *ngIf="loginForm.get('email').valid && loginForm.get('email').touched"
          class="input-valid"
        ></span>
        <span
          *ngIf="loginForm.hasError('required', ['email']) && loginFormSubmitted"
          class="error-msg"
        >
            Email required!
          </span>
        <span
          *ngIf="!loginForm.hasError('required', ['email']) && loginFormSubmitted && loginForm.hasError('email', ['email']) && loginFormSubmitted"
          class="error-msg"
        >
            Invalid email!
          </span>
      </div>

      <div class="dwmth-form-input__box">
        <label
          class="dwmth-form-label"
          for="password"
        >
          Password
        </label>
        <input
          class="dwmth-form-input"
          data-test="auth-login-form-password"
          formControlName="password"
          id="password"
          name="password"
          type="password"
        >
        <span
          *ngIf="loginForm.get('password').valid && loginForm.get('password').touched"
          class="input-valid"
        ></span>
        <span
          *ngIf="loginForm.hasError('minlength', ['password']) && loginFormSubmitted"
          class="error-msg">
              Minimum 8 signs required!
          </span>
        <span
          *ngIf="loginForm.hasError('required', ['password']) && loginFormSubmitted"
          class="error-msg"
        >
            Password required
          </span>
      </div>

      <div
        class="
            row
            align-center
            justify-between
            dwmth-login__remember"
      >
        <!--
                  <div
                    class="
                      row
                      align-center"
                  >
                    <input
                      #rememberUser
                      id="remember-user"
                      type="checkbox"
                      data-test="auth-login-form-remember-user-checkbox"
                    >
                    <label
                      for="remember-user"
                      class="checkbox-label"
                    ></label>
                    <span
                      class="
                        dwmth-copy
                        dwmth-copy&#45;&#45;large
                        dwmth-copy&#45;&#45;x-dark"
                    >
                      Remember me
                    </span>
                  </div>
        -->
        <a
          class="dwmth-copy"
          data-test="auth-redirect-to-forgotten-password"
          routerLink="/auth/forgotten-password"
        >
          Forgot password?
        </a>
      </div>

      <button
        class="
            dwmth-btn
            dwmth-btn--wide
            dwmth-btn--blue
            dwmth-form-submit-btn"
        data-test="auth-login-form-submit-button"
      >
        <ng-container *ngIf="!isLoggingIn ; else loading">Log In</ng-container>
      </button>
    </form>
  </div>

  <p class="dwmth-copy" *ngIf="registrationMode !== 'private'">
    Don't have an account?
    <a
      *ngIf="registrationMode === 'public'"
      class="dwmth-blue"
      data-test="auth-redirect-to-registration"
      routerLink="/auth/register"
    >
      Register
    </a>
    <a
      *ngIf="registrationMode === 'restricted' && advertiserApplyFormUrl"
      class="dwmth-blue block-link"
      data-test="auth-redirect-to-registration"
      [href]="advertiserApplyFormUrl"
    >
      Apply as Advertiser
    </a>
    <a
      *ngIf="registrationMode === 'restricted' && publisherApplyFormUrl"
      class="dwmth-blue block-link"
      data-test="auth-redirect-to-registration"
      [href]="publisherApplyFormUrl"
    >
      Apply as Publisher
    </a>
  </p>
</div>
